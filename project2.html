<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Do You Love Me? üíï</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            overflow-x: hidden;
            min-height: 100vh;
        }

        .page {
            display: none;
            min-height: 100vh;
            justify-content: center;
            align-items: center;
            padding: 20px;
            position: relative;
            overflow-y: auto;
        }

        .page.active {
            display: flex;
        }

        .background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
        }

        .bg-gradient-1 {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .bg-gradient-2 {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }

        .hearts {
            position: absolute;
            width: 100%;
            height: 100%;
            overflow: hidden;
            pointer-events: none;
        }

        .heart {
            position: absolute;
            font-size: 20px;
            opacity: 0.6;
            animation: float 10s infinite;
            pointer-events: none;
        }

        @keyframes float {
            0% {
                transform: translateY(100vh) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 0.6;
            }
            90% {
                opacity: 0.6;
            }
            100% {
                transform: translateY(-100px) rotate(360deg);
                opacity: 0;
            }
        }

        .card {
            background: white;
            border-radius: 30px;
            padding: 50px 40px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            text-align: center;
            max-width: 450px;
            width: 100%;
            animation: slideUp 0.6s ease;
            position: relative;
            z-index: 1;
        }

        @keyframes slideUp {
            from {
                transform: translateY(50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .lock-icon {
            font-size: 60px;
            margin-bottom: 20px;
            transition: all 0.3s;
        }

        h1 {
            font-size: 32px;
            margin-bottom: 10px;
            color: #333;
        }

        .subtitle {
            color: #666;
            margin-bottom: 30px;
            font-size: 16px;
        }

        input[type="password"] {
            width: 100%;
            padding: 15px 20px;
            border: 2px solid #e0e0e0;
            border-radius: 15px;
            font-size: 16px;
            margin-bottom: 20px;
            transition: all 0.3s;
        }

        input[type="password"]:focus {
            outline: none;
            border-color: #f5576c;
        }

        .btn {
            width: 100%;
            padding: 15px;
            border: none;
            border-radius: 15px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-primary {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(245, 87, 108, 0.4);
        }

        .btn-primary:active {
            transform: translateY(0);
        }

        .emoji {
            font-size: 80px;
            margin: 20px 0;
        }

        .question {
            font-size: 28px;
            color: #f5576c;
            font-weight: bold;
            margin: 30px 0;
        }

        .btn-group {
            display: flex;
            gap: 15px;
            margin-top: 30px;
        }

        .btn-yes {
            flex: 1;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
        }

        .btn-yes:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(245, 87, 108, 0.4);
        }

        .btn-no {
            flex: 1;
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            color: #666;
            position: relative;
            transition: all 0.2s;
        }

        .btn-no:hover {
            transform: translateY(-2px);
        }

        .btn-no.blur {
            filter: blur(3px);
            pointer-events: none;
        }

        .loading-heart {
            font-size: 100px;
            animation: heartbeat 1s infinite;
        }

        @keyframes heartbeat {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.3); }
        }

        .loading-text {
            font-size: 36px;
            color: #f5576c;
            font-weight: bold;
            margin-top: 20px;
        }

        .gallery-card {
            max-width: 550px;
        }

        .photo-container {
            position: relative;
            margin: 30px 0;
        }

        .photo-frame {
            width: 300px;
            height: 300px;
            border-radius: 30px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            margin: 0 auto;
            position: relative;
            background: #f0f0f0;
        }

        .photo-frame img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .photo-placeholder {
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 80px;
        }

        .upload-section {
            margin-top: 20px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 15px;
        }

        .upload-btn {
            padding: 10px 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-size: 14px;
            margin: 5px;
            transition: all 0.3s;
        }

        .upload-btn:hover {
            opacity: 0.9;
            transform: translateY(-2px);
        }

        .upload-btn:active {
            transform: translateY(0);
        }

        #fileInput, #videoInput {
            display: none;
        }

        .video-container {
            margin: 20px 0;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        video {
            width: 100%;
            max-height: 400px;
            border-radius: 20px;
            display: block;
        }

        .carousel-btn {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: rgba(102, 126, 234, 0.9);
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
            transition: all 0.3s;
            z-index: 10;
        }

        .carousel-btn:hover {
            background: rgba(102, 126, 234, 1);
            transform: translateY(-50%) scale(1.1);
        }

        .carousel-btn:active {
            transform: translateY(-50%) scale(0.95);
        }

        .carousel-btn.prev {
            left: -70px;
        }

        .carousel-btn.next {
            right: -70px;
        }

        .dots {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
        }

        .dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #ddd;
            transition: all 0.3s;
            cursor: pointer;
        }

        .dot:hover {
            transform: scale(1.2);
        }

        .dot.active {
            background: #f5576c;
            transform: scale(1.3);
        }

        .love-message {
            font-size: 24px;
            color: #f5576c;
            font-weight: bold;
            margin: 20px 0;
        }

        .icon-group {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 30px;
        }

        .icon-btn {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            background: white;
            border: none;
            font-size: 35px;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: all 0.3s;
        }

        .icon-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }

        .icon-btn:active {
            transform: translateY(-2px);
        }

        .romantic-card {
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
        }

        .romantic-text {
            font-size: 20px;
            line-height: 1.8;
            color: #333;
            margin: 30px 0;
            font-style: italic;
            text-align: justify;
        }

        .memory-list {
            text-align: left;
            margin: 30px 0;
        }

        .memory-item {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 20px;
            margin-bottom: 20px;
            transition: all 0.3s;
        }

        .memory-item:hover {
            transform: translateX(5px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .memory-title {
            font-size: 20px;
            color: #f5576c;
            font-weight: bold;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .memory-text {
            color: #666;
            line-height: 1.6;
        }

        .music-btn {
            position: fixed;
            top: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: white;
            border: none;
            font-size: 28px;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            z-index: 1000;
            transition: all 0.3s;
        }

        .music-btn:hover {
            transform: scale(1.1);
        }

        .music-btn:active {
            transform: scale(0.95);
        }

        .music-btn.playing {
            animation: spin 3s linear infinite;
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .error-msg {
            color: #f5576c;
            font-size: 14px;
            margin-top: 10px;
            display: none;
            animation: fadeIn 0.3s;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-10px); }
            20%, 40%, 60%, 80% { transform: translateX(10px); }
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-20px); }
            60% { transform: translateY(-10px); }
        }

        @keyframes heartBreak {
            0% { transform: scale(1) rotate(0deg); }
            25% { transform: scale(1.2) rotate(-10deg); }
            50% { transform: scale(0.8) rotate(10deg); }
            75% { transform: scale(1.1) rotate(-5deg); }
            100% { transform: scale(1) rotate(0deg); }
        }

        .shake {
            animation: shake 0.5s;
        }

        .bounce {
            animation: bounce 0.6s;
        }

        .heartbreak {
            animation: heartBreak 0.8s;
        }

        .sad-emoji {
            font-size: 60px;
            margin: 20px 0;
            display: none;
            animation: bounce 1s infinite;
        }

        .hint-box {
            background: #fff3cd;
            border: 2px dashed #ffc107;
            border-radius: 15px;
            padding: 15px;
            margin-top: 20px;
            display: none;
            animation: slideDown 0.5s ease;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .hint-text {
            color: #856404;
            font-size: 13px;
            margin: 5px 0;
        }

        .attempts-counter {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.9);
            padding: 10px 15px;
            border-radius: 20px;
            font-size: 14px;
            color: #666;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            z-index: 100;
        }

        .wrong-heart {
            position: fixed;
            font-size: 40px;
            pointer-events: none;
            animation: wrongHeartFloat 2s ease-out forwards;
            z-index: 9999;
        }

        @keyframes wrongHeartFloat {
            0% {
                opacity: 1;
                transform: translateY(0) rotate(0deg);
            }
            100% {
                opacity: 0;
                transform: translateY(-200px) rotate(360deg);
            }
        }

        .avatar-img {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            margin: 0 auto 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        @media (max-width: 600px) {
            .card {
                padding: 40px 30px;
            }
            
            .carousel-btn.prev {
                left: 10px;
            }
            
            .carousel-btn.next {
                right: 10px;
            }
            
            .photo-frame {
                width: 250px;
                height: 250px;
            }

            h1 {
                font-size: 28px;
            }

            .question {
                font-size: 24px;
            }

            .romantic-text {
                font-size: 18px;
            }

            .music-btn {
                top: 20px;
                right: 20px;
                width: 50px;
                height: 50px;
                font-size: 24px;
            }

            .attempts-counter {
                top: 15px;
                right: 15px;
                font-size: 12px;
                padding: 8px 12px;
            }
        }
    </style>
</head>
<body>
    <!-- Background Music - Romantic Piano from Pixabay -->
    <audio id="bgMusic" loop>
        <source src="Rizky Febian & Adrian Khalif - Alamak (Official Lyric Video).mp3" type="audio/mpeg">
    </audio>

    <!-- Page 1: Password -->
    <div class="page active" id="page1">
        <div class="background bg-gradient-1"></div>
        <div class="attempts-counter" id="attemptsCounter">Percobaan: 0</div>
        <div class="card">
            <div class="lock-icon" id="lockIcon">üîí</div>
            <div class="sad-emoji" id="sadEmoji">üò¢</div>
            <h1>Rahasia</h1>
            <p class="subtitle">Masukkan password dulu ya üòä</p>
            <input type="password" id="passwordInput" placeholder="Password...">
            <div class="error-msg" id="errorMsg">Password salah! Coba lagi ü•∫</div>
            <div class="hint-box" id="hintBox">
                <div class="hint-text">üí° <strong>Hint:</strong></div>
                <div class="hint-text" id="hintText"></div>
            </div>
            <button class="btn btn-primary" onclick="checkPassword()">Masuk üíï</button>
        </div>
    </div>

    <!-- Page 2: Question -->
    <div class="page" id="page2">
        <div class="background bg-gradient-1">
            <div class="hearts" id="hearts1"></div>
        </div>
        <button class="music-btn" id="musicBtn" onclick="toggleMusic()">üéµ</button>
        <div class="card">
            <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=Felix" class="avatar-img" alt="Avatar">
            <div class="emoji">ü•∫</div>
            <p style="font-size: 18px; color: #666; margin-bottom: 10px;">Penasaran isinya apa? Tapi nanti kirim foto dan video ya!!!</p>
            <p style="font-size: 16px; color: #999; margin-bottom: 10px;">Biar lebih menarik lagi, jangan lupa kasih foto dan video sesuka hati kamu üíï</p>
            <div class="question">Cinta Aku Ga?</div>
            <div class="btn-group">
                <button class="btn btn-yes" onclick="answer('yes')">Iya Dong! üíï</button>
                <button class="btn btn-no" id="btnNo" onmouseover="dodgeButton()" onclick="forceYes()">Ga Deh...</button>
            </div>
        </div>
    </div>

    <!-- Page 3: Loading -->
    <div class="page" id="page3">
        <div class="background bg-gradient-2">
            <div class="hearts" id="hearts2"></div>
        </div>
        <div class="card">
            <div class="loading-heart">üíï</div>
            <div class="loading-text">Yayyy! üíï</div>
        </div>
    </div>

    <!-- Page 4: Gallery -->
    <div class="page" id="page4">
        <div class="background bg-gradient-1">
            <div class="hearts" id="hearts3"></div>
        </div>
        <button class="music-btn playing" id="musicBtn" onclick="toggleMusic()">üéµ</button>
        <div class="card gallery-card">
            <div class="photo-container">
                <button class="carousel-btn prev" onclick="changePhoto(-1)">‚Äπ</button>
                <div class="photo-frame">
                    <div class="photo-placeholder" id="photoDisplay">‚ù§Ô∏è</div>
                </div>
                <button class="carousel-btn next" onclick="changePhoto(1)">‚Ä∫</button>
            </div>
            <div class="dots" id="dotsContainer"></div>
            <div class="upload-section">
                <p style="font-size: 14px; color: #666; margin-bottom: 10px;">üì∑ Upload foto kamu di sini:</p>
                <input type="file" id="fileInput" accept="image/*" multiple onchange="uploadPhotos()">
                <button class="upload-btn" onclick="document.getElementById('fileInput').click()">üì∑ Upload Foto</button>
                <p style="font-size: 12px; color: #999; margin-top: 5px;">*Foto hanya tersimpan di browser ini</p>
            </div>
            <div class="love-message">Aku Juga Sayang Kamu!</div>
            <p style="color: #666; font-size: 16px; margin: 15px 0;">Terima kasih sudah menjadi bagian terpenting dalam hidupku. Kamu adalah alasan aku tersenyum setiap hari! üåü</p>
            <div class="icon-group">
                <button class="icon-btn" onclick="showRomanticMessage()" title="Kata Romantis">üåπ</button>
                <button class="icon-btn" onclick="showMemories()" title="Kenangan Kita">üé¨</button>
            </div>
        </div>
    </div>

    <!-- Page 5: Romantic Message -->
    <div class="page" id="page5">
        <div class="background bg-gradient-2">
            <div class="hearts" id="hearts4"></div>
        </div>
        <button class="music-btn playing" onclick="toggleMusic()">üéµ</button>
        <div class="card romantic-card">
            <div class="emoji">üíù</div>
            <h1>Kata-kata Terindah Untukmu</h1>
            <div class="romantic-text">
                Dalam setiap detik yang kita lewati bersama, aku menemukan alasan baru untuk jatuh cinta padamu. Kamu bukan hanya cinta dalam hidupku, tapi kamu adalah hidupku itu sendiri. Setiap senyummu adalah matahari yang menerangi hariku, setiap tawamu adalah melodi terindah yang pernah aku dengar. Terima kasih telah memilih untuk mencintai aku, untuk menjadi bagian dari cerita hidupku. Aku berjanji akan selalu ada untukmu, dalam suka maupun duka. Karena bersamamu, aku menemukan rumah dalam dekapan hangatmu. I love you more than words can say. üíï
            </div>
            <button class="btn btn-primary" onclick="backToGallery()">Kembali üíï</button>
        </div>
    </div>

    <!-- Page 6: Memories -->
    <div class="page" id="page6">
        <div class="background bg-gradient-1">
            <div class="hearts" id="hearts5"></div>
        </div>
        <button class="music-btn playing" onclick="toggleMusic()">üéµ</button>
        <div class="card romantic-card">
            <h1>Kenangan Kita üé¨</h1>
            
            <div class="upload-section">
                <p style="font-size: 14px; color: #666; margin-bottom: 10px;">üé• Upload video kenangan kamu:</p>
                <input type="file" id="videoInput" accept="video/*" onchange="uploadVideo()">
                <button class="upload-btn" onclick="document.getElementById('videoInput').click()">üé• Upload Video</button>
                <p style="font-size: 12px; color: #999; margin-top: 5px;">*Video hanya tersimpan di browser ini</p>
            </div>

            <div class="video-container" id="videoContainer" style="display: none;">
                <video id="memoryVideo" controls></video>
            </div>

            <div class="memory-list">
                <div class="memory-item">
                    <div class="memory-title">
                        <span>üé¨</span> Moment Pertama
                    </div>
                    <div class="memory-text">Saat pertama kali kita bertemu, aku sudah tahu kamu istimewa. Tatapan matamu yang hangat membuat hatiku berdetak lebih cepat.</div>
                </div>
                <div class="memory-item">
                    <div class="memory-title">
                        <span>üé¨</span> Kenangan Manis
                    </div>
                    <div class="memory-text">Setiap detik bersamamu adalah kenangan yang tak terlupakan. Dari tawa kita yang pecah bersama hingga momen hening yang penuh makna.</div>
                </div>
                <div class="memory-item">
                    <div class="memory-title">
                        <span>üé¨</span> Masa Depan Kita
                    </div>
                    <div class="memory-text">Berharap kita bisa terus bersama hingga tua nanti. Membangun mimpi-mimpi indah dan mewujudkannya bersama-sama. üíï</div>
                </div>
            </div>
            <button class="btn btn-primary" onclick="backToGallery()">Kembali üíï</button>
        </div>
    </div>

    <script>
        let dodgeCount = 0;
        let currentPhoto = 0;
        let photos = ['‚ù§Ô∏è', 'üíï', 'üíñ'];
        let uploadedPhotos = [];
        let autoSlideInterval = null;
        let wrongAttempts = 0;
        let musicInitialized = false;

        const hints = [
            "Coba kata yang biasa kamu ucapkan ke orang tersayang üíï",
            "3 huruf dalam bahasa Inggris yang artinya 'Aku Cinta Kamu' üíë",
            "Angka yang melambangkan 'I Love You' üî¢"
        ];

        const wrongMessages = [
            "Waduh salah! üòÖ",
            "Hmm... belum benar ü§î",
            "Coba lagi ya üí≠",
            "Hampir! Tapi belum üòä",
            "Hayoo mikir yang bener üßê"
        ];

        function createWrongHeart(x, y) {
            const heart = document.createElement('div');
            heart.className = 'wrong-heart';
            heart.innerHTML = 'üíî';
            heart.style.left = x + 'px';
            heart.style.top = y + 'px';
            document.body.appendChild(heart);
            
            setTimeout(() => heart.remove(), 2000);
        }

        function shakeElement(elementId) {
            const element = document.getElementById(elementId);
            if (element) {
                element.classList.add('shake');
                setTimeout(() => element.classList.remove('shake'), 500);
            }
        }

        function heartBreakAnimation() {
            const lockIcon = document.getElementById('lockIcon');
            if (lockIcon) {
                lockIcon.innerHTML = 'üíî';
                lockIcon.classList.add('heartbreak');
                setTimeout(() => {
                    lockIcon.innerHTML = 'üîí';
                    lockIcon.classList.remove('heartbreak');
                }, 800);
            }
        }

        function showSadEmoji() {
            const sadEmoji = document.getElementById('sadEmoji');
            const lockIcon = document.getElementById('lockIcon');
            
            if (lockIcon && sadEmoji) {
                lockIcon.style.display = 'none';
                sadEmoji.style.display = 'block';
                setTimeout(() => {
                    lockIcon.style.display = 'block';
                    sadEmoji.style.display = 'none';
                }, 2000);
            }
        }

        function showHint() {
            const hintBox = document.getElementById('hintBox');
            const hintText = document.getElementById('hintText');
            
            if (hintBox && hintText) {
                const randomHint = hints[Math.floor(Math.random() * hints.length)];
                hintText.textContent = randomHint;
                hintBox.style.display = 'block';
                setTimeout(() => hintBox.style.display = 'none', 5000);
            }
        }

        function createHearts() {
            const containers = ['hearts1', 'hearts2', 'hearts3', 'hearts4', 'hearts5'];
            containers.forEach(id => {
                const container = document.getElementById(id);
                if (container) {
                    container.innerHTML = '';
                    for (let i = 0; i < 15; i++) {
                        const heart = document.createElement('div');
                        heart.className = 'heart';
                        heart.innerHTML = ['‚ù§Ô∏è', 'üíï', 'üíñ', 'üíó', 'üíù'][Math.floor(Math.random() * 5)];
                        heart.style.left = Math.random() * 100 + '%';
                        heart.style.animationDelay = Math.random() * 10 + 's';
                        heart.style.fontSize = (Math.random() * 20 + 15) + 'px';
                        container.appendChild(heart);
                    }
                }
            });
        }

        function uploadPhotos() {
            const files = document.getElementById('fileInput').files;
            if (!files || files.length === 0) return;
            
            uploadedPhotos = [];
            let loadedCount = 0;
            
            Array.from(files).forEach(file => {
                const reader = new FileReader();
                reader.onload = function(e) {
                    uploadedPhotos.push(e.target.result);
                    loadedCount++;
                    
                    if (loadedCount === files.length) {
                        photos = [...uploadedPhotos];
                        currentPhoto = 0;
                        updatePhotoDisplay();
                        updateDots();
                        startAutoSlide();
                    }
                };
                reader.readAsDataURL(file);
            });
        }

        function uploadVideo() {
            const file = document.getElementById('videoInput').files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const video = document.getElementById('memoryVideo');
                    const container = document.getElementById('videoContainer');
                    if (video && container) {
                        video.src = e.target.result;
                        container.style.display = 'block';
                    }
                };
                reader.readAsDataURL(file);
            }
        }

        function updatePhotoDisplay() {
            const display = document.getElementById('photoDisplay');
            if (!display) return;
            
            if (uploadedPhotos.length > 0) {
                display.innerHTML = `<img src="${photos[currentPhoto]}" alt="Photo" style="width: 100%; height: 100%; object-fit: cover;">`;
            } else {
                display.innerHTML = photos[currentPhoto];
            }
        }

        function updateDots() {
            const dotsContainer = document.getElementById('dotsContainer');
            if (!dotsContainer) return;
            
            dotsContainer.innerHTML = '';
            photos.forEach((_, index) => {
                const dot = document.createElement('div');
                dot.className = 'dot' + (index === currentPhoto ? ' active' : '');
                dot.onclick = () => goToPhoto(index);
                dotsContainer.appendChild(dot);
            });
        }

        function goToPhoto(index) {
            currentPhoto = index;
            updatePhotoDisplay();
            const dots = document.querySelectorAll('.dot');
            dots.forEach((dot, i) => dot.classList.toggle('active', i === currentPhoto));
            stopAutoSlide();
            setTimeout(() => {
                if (uploadedPhotos.length > 0) startAutoSlide();
            }, 5000);
        }

        function startAutoSlide() {
            stopAutoSlide();
            if (photos.length > 1) {
                autoSlideInterval = setInterval(() => changePhoto(1), 3000);
            }
        }

        function stopAutoSlide() {
            if (autoSlideInterval) {
                clearInterval(autoSlideInterval);
                autoSlideInterval = null;
            }
        }

        function checkPassword() {
            const password = document.getElementById('passwordInput').value.toLowerCase().trim();
            const errorMsg = document.getElementById('errorMsg');
            const attemptsCounter = document.getElementById('attemptsCounter');
            const input = document.getElementById('passwordInput');
            
            if (!password) {
                if (errorMsg) {
                    errorMsg.textContent = "Masukkan password dulu ya! ü•∫";
                    errorMsg.style.display = 'block';
                }
                shakeElement('passwordInput');
                setTimeout(() => { if (errorMsg) errorMsg.style.display = 'none'; }, 2000);
                return;
            }
            
            if (password === 'forever' || password === 'iloveyou' || password === '130925') {
                if (input) input.style.borderColor = '#4caf50';
                const lockIcon = document.getElementById('lockIcon');
                if (lockIcon) lockIcon.innerHTML = 'üîì';
                
                setTimeout(() => {
                    showPage('page2');
                    initializeMusic();
                }, 500);
            } else {
                wrongAttempts++;
                if (attemptsCounter) attemptsCounter.textContent = `Percobaan: ${wrongAttempts}`;
                
                const randomMsg = wrongMessages[Math.floor(Math.random() * wrongMessages.length)];
                if (errorMsg) {
                    errorMsg.textContent = randomMsg;
                    errorMsg.style.display = 'block';
                }
                
                if (input) input.style.borderColor = '#f5576c';
                
                const card = document.querySelector('#page1 .card');
                if (card) {
                    card.classList.add('shake');
                    setTimeout(() => card.classList.remove('shake'), 500);
                }
                
                shakeElement('passwordInput');
                heartBreakAnimation();
                
                for (let i = 0; i < 3; i++) {
                    setTimeout(() => {
                        const x = Math.random() * window.innerWidth;
                        const y = Math.random() * (window.innerHeight / 2) + window.innerHeight / 4;
                        createWrongHeart(x, y);
                    }, i * 200);
                }
                
                if (wrongAttempts >= 3) showSadEmoji();
                if (wrongAttempts >= 5) showHint();
                
                setTimeout(() => {
                    if (errorMsg) errorMsg.style.display = 'none';
                    if (input) {
                        input.style.borderColor = '#e0e0e0';
                        input.value = '';
                    }
                }, 2000);
            }
        }

        function initializeMusic() {
            if (!musicInitialized) {
                const music = document.getElementById('bgMusic');
                if (music) {
                    music.play().catch(e => console.log('Audio autoplay prevented:', e));
                    updateMusicButton(true);
                    musicInitialized = true;
                }
            }
        }

        function updateMusicButton(isPlaying) {
            const musicBtns = document.querySelectorAll('.music-btn');
            musicBtns.forEach(btn => {
                if (btn) {
                    if (isPlaying) {
                        btn.classList.add('playing');
                        btn.innerHTML = 'üéµ';
                    } else {
                        btn.classList.remove('playing');
                        btn.innerHTML = 'üîá';
                    }
                }
            });
        }

        function dodgeButton() {
            const btn = document.getElementById('btnNo');
            if (!btn) return;
            
            dodgeCount++;
            if (dodgeCount < 4) {
                btn.classList.add('blur');
                setTimeout(() => btn.classList.remove('blur'), 500);
            } else {
                forceYes();
            }
        }

        function forceYes() {
            answer('yes');
        }

        function answer(response) {
            if (response === 'yes') {
                showPage('page3');
                setTimeout(() => {
                    showPage('page4');
                    updateDots();
                    if (uploadedPhotos.length > 0) startAutoSlide();
                }, 2000);
            }
        }

        function changePhoto(direction) {
            currentPhoto = (currentPhoto + direction + photos.length) % photos.length;
            updatePhotoDisplay();
            const dots = document.querySelectorAll('.dot');
            dots.forEach((dot, index) => dot.classList.toggle('active', index === currentPhoto));
        }

        function showRomanticMessage() {
            stopAutoSlide();
            showPage('page5');
        }

        function showMemories() {
            stopAutoSlide();
            showPage('page6');
        }

        function backToGallery() {
            showPage('page4');
            updateDots();
            if (uploadedPhotos.length > 0) startAutoSlide();
        }

        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(page => page.classList.remove('active'));
            const targetPage = document.getElementById(pageId);
            if (targetPage) targetPage.classList.add('active');
        }

        function toggleMusic() {
            const music = document.getElementById('bgMusic');
            if (!music) return;
            
            if (music.paused) {
                music.play().catch(e => console.log('Audio play failed:', e));
                updateMusicButton(true);
            } else {
                music.pause();
                updateMusicButton(false);
            }
        }

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', () => {
            createHearts();
            updateDots();
            
            const passwordInput = document.getElementById('passwordInput');
            if (passwordInput) {
                passwordInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') checkPassword();
                });
            }
            
            const prevBtn = document.querySelector('.carousel-btn.prev');
            const nextBtn = document.querySelector('.carousel-btn.next');
            
            if (prevBtn) {
                prevBtn.addEventListener('click', () => {
                    stopAutoSlide();
                    setTimeout(() => { if (uploadedPhotos.length > 0) startAutoSlide(); }, 5000);
                });
            }
            
            if (nextBtn) {
                nextBtn.addEventListener('click', () => {
                    stopAutoSlide();
                    setTimeout(() => { if (uploadedPhotos.length > 0) startAutoSlide(); }, 5000);
                });
            }
        });
    </script>
</body>
</html>